<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Radiadores Emerson - Cadastro de Servi莽o</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 flex justify-center items-start min-h-screen p-6">

<div class="bg-white shadow-lg rounded-xl p-8 w-full max-w-5xl">

    <h1 class="text-2xl font-bold text-gray-800 mb-2">Radiadores Emerson</h1>
    <h2 class="text-xl font-semibold text-gray-600 mb-6">Cadastro de Servi莽o</h2>

    <!-- Mensagens de feedback -->
    <div th:if="${mensagemSucesso}" class="bg-green-100 border border-green-300 text-green-800 px-4 py-2 rounded mb-4" th:text="${mensagemSucesso}"></div>
    <div th:if="${mensagemErro}" class="bg-red-100 border border-red-300 text-red-800 px-4 py-2 rounded mb-4" th:text="${mensagemErro}"></div>

    <!-- Formul谩rio -->
    <form th:action="@{/servicos}" method="post" th:object="${servico}" class="space-y-4">
        <div class="grid md:grid-cols-2 gap-4">
            <div>
                <label for="modelo" class="block text-gray-700 font-medium">Modelo</label>
                <input type="text" id="modelo" th:field="*{modelo}" placeholder="Ex: Gol, Uno"
                       class="w-full mt-1 p-2 border rounded-lg focus:ring-2 focus:ring-blue-500" required>
            </div>
            <div>
                <label for="tipo" class="block text-gray-700 font-medium">Tipo</label>
                <input type="text" id="tipo" th:field="*{tipo}" placeholder="Ex: Radiador, Intercooler"
                       class="w-full mt-1 p-2 border rounded-lg focus:ring-2 focus:ring-blue-500" required>
            </div>
        </div>

        <div class="grid md:grid-cols-2 gap-4">
            <div>
                <label for="servicoExecutado" class="block text-gray-700 font-medium">Servi莽o Executado</label>
                <input type="text" id="servicoExecutado" th:field="*{servicoExecutado}" placeholder="Ex: Troca, Limpeza"
                       class="w-full mt-1 p-2 border rounded-lg focus:ring-2 focus:ring-blue-500" required>
            </div>
            <div>
                <label for="cliente" class="block text-gray-700 font-medium">Cliente</label>
                <input type="text" id="cliente" th:field="*{cliente}" placeholder="Ex: Nome do cliente"
                       class="w-full mt-1 p-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
            </div>
        </div>

        <div class="grid md:grid-cols-2 gap-4">
            <div>
                <label for="data" class="block text-gray-700 font-medium">Data</label>
                <input type="date" id="data" th:field="*{data}"
                       class="w-full mt-1 p-2 border rounded-lg focus:ring-2 focus:ring-blue-500" required>
            </div>
            <div>
                <label for="preco" class="block text-gray-700 font-medium">Pre莽o</label>
                <input type="number" id="preco" th:field="*{preco}" step="0.01" min="0" placeholder="Ex: 150.00"
                       class="w-full mt-1 p-2 border rounded-lg focus:ring-2 focus:ring-blue-500" required>
            </div>
        </div>

        <button type="submit"
                class="bg-blue-600 text-white px-6 py-2 rounded-lg shadow hover:bg-blue-700 transition">
             Salvar
        </button>
    </form>

    <!-- Relat贸rios -->
    <div class="mt-10 border-t pt-6">
        <h2 class="text-xl font-semibold text-gray-700 mb-4">Relat贸rios e Somas</h2>
        <div class="grid md:grid-cols-3 gap-4">

            <!-- Soma do Dia -->
            <form th:action="@{/servicos/soma-dia}" method="get" class="bg-gray-50 p-4 rounded-lg border space-y-2">
                <label for="dataSomaDia" class="font-medium text-gray-700">Consultar Total do Dia</label>
                <input type="date" id="dataSomaDia" name="data"
                       class="w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500" required>
                <button type="submit"
                        class="w-full bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition">
                     Ver Total
                </button>
            </form>

            <!-- Relat贸rio Semanal -->
            <form th:action="@{/servicos/relatorio-semana}" method="get" class="bg-gray-50 p-4 rounded-lg border space-y-2">
                <label for="dataRelatorioSemana" class="font-medium text-gray-700">Relat贸rio Semanal</label>
                <input type="date" id="dataRelatorioSemana" name="data"
                       class="w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500" required>
                <button type="submit"
                        class="w-full bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition">
                     Gerar Relat贸rio
                </button>
            </form>

            <!-- Relat贸rio Mensal -->
            <form th:action="@{/servicos/relatorio-mensal}" method="get" class="bg-gray-50 p-4 rounded-lg border space-y-2">
                <label for="dataRelatorioMes" class="font-medium text-gray-700">Relat贸rio Mensal</label>
                <input type="date" id="dataRelatorioMes" name="data"
                       class="w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500" required>
                <button type="submit"
                        class="w-full bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition">
                     Gerar Relat贸rio
                </button>
            </form>
        </div>
    </div>

    <!-- Tabela -->
    <h2 class="text-xl font-semibold text-gray-700 mt-10 mb-4">Servi莽os Cadastrados</h2>
    <div class="overflow-x-auto">
        <table class="w-full border-collapse bg-white shadow rounded-lg overflow-hidden">
            <thead>
            <tr class="bg-gray-100 text-left">
                <th class="p-3 border">Modelo</th>
                <th class="p-3 border">Tipo</th>
                <th class="p-3 border">Servi莽o Executado</th>
                <th class="p-3 border">Cliente</th>
                <th class="p-3 border">Data</th>
                <th class="p-3 border">Pre莽o</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="servico : ${servicos}" class="hover:bg-blue-50 transition">
                <td class="p-3 border" th:text="${servico.modelo}"></td>
                <td class="p-3 border" th:text="${servico.tipo}"></td>
                <td class="p-3 border" th:text="${servico.servicoExecutado}"></td>
                <td class="p-3 border" th:text="${servico.cliente}"></td>
                <td class="p-3 border" th:text="${servico.data != null ? #temporals.format(servico.data, 'dd/MM/yyyy') : ''}"></td>
                <td class="p-3 border" th:text="${servico.preco != null ? 'R$ ' + #numbers.formatDecimal(servico.preco, 1, 'POINT', 2, 'COMMA') : ''}"></td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

</body>
</html>
